(function(){"use strict";var t={6833:function(t,o,s){var a=s(144),r=s(998),l=s(9256),e=s(3201),c=s(2928),u=function(){var t=this,o=t._self._c;return o("section",{staticClass:"app"},[o(r.Z,[o("homeHeader"),o(c.Z,[o(l.Z,{attrs:{fluid:"","fill-height":""}},[o(e.Z,{staticClass:"align-center justify-center"},[o("router-view",{key:"RouterView/"+t.$router.fullPath})],1)],1)],1)],1)],1)},i=[],n=s(1783),w=s(7953),d=function(){var t=this,o=t._self._c;return o("section",[o(n.Z,{staticClass:"flex-grow-0",attrs:{color:"blue-grey",dark:""}},[o(w.qW,{staticStyle:{cursor:"pointer"},on:{click:function(o){return t.$router.go(0)}}},[t._v("座位管理系統")])],1)],1)},m=[],f={name:"homeHeader"},h=f,p=s(1001),g=(0,p.Z)(h,d,m,!1,null,null,null),v=g.exports,b={components:{homeHeader:v}},Z=b,y=(0,p.Z)(Z,u,i,!1,null,null,null),C=y.exports,R=s(8345),k=s(6190),_=s(9582),S=s(4886),x=s(266),T=s(4037),O=s(9930),P=s(4324),j=s(1713),D=s(3687),N=s(7808),$=function(){var t=this,o=t._self._c;return o("section",{staticClass:"app"},[[o(l.Z,{staticClass:"fill-height",attrs:{fluid:""}},[t.isSubmit?t._e():o(j.Z,{attrs:{justify:"center",align:"center"}},[o(x.Z,[o(k.Z,{staticClass:"ma-2",attrs:{color:"cyan lighten-1",dark:"",rounded:"",outlined:"","x-large":"",elevation:"3"},on:{click:function(o){t.dialog=!0}}},[t._v(" 設定座位表 ")])],1),o(x.Z,[o(k.Z,{staticClass:"ma-2",attrs:{color:"cyan lighten-1",rounded:"",dark:"",outlined:"","x-large":"",loading:t.isSelecting,elevation:"3"},on:{click:t.onButtonClick}},[t._v(" "+t._s(t.buttonText)+" ")]),o("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:t.onFileChanged}})],1),o(x.Z,[o(k.Z,{staticClass:"ma-2",attrs:{color:"success",dark:"",rounded:"",outlined:"","x-large":"",elevation:"3"},on:{click:t.submit}},[t._v(" 送出 ")])],1)],1),t.isSubmit?o(j.Z,{attrs:{justify:"center",align:"center"}},[o("div",[o("img",{attrs:{src:s(8296),width:"30px",height:"30px"}})]),o("div",[o("h2",{staticStyle:{color:"rgb(25, 192, 78)"}},[t._v(" 已成功下載座位表！")])])]):t._e()],1)],o(O.Z,{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:t.dialog,callback:function(o){t.dialog=o},expression:"dialog"}},[o(_.Z,[o(S.EB,{staticClass:"pa-0"},[o(n.Z,{attrs:{color:"blue-grey",dark:"",flat:""}},[o(w.qW,[t._v("設定座位表")]),o(D.Z),o(k.Z,{attrs:{text:""},on:{click:function(o){t.dialog=!1}}},[t._v(" 返回 ")])],1)],1),o(l.Z,{attrs:{fluid:""}},[o(j.Z,[o(x.Z,[o(k.Z,{attrs:{color:"cyan lighten-1",dark:""},on:{click:t.addClassRoom}},[t._v("新增教室")])],1)],1),o(j.Z,[o(x.Z,[this.classRoom.length>0?o(T.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.classRoom,"items-per-page":5,"hide-default-footer":!0,"item-key":"roomNo"},scopedSlots:t._u([{key:"item.roomNo",fn:function({item:s}){return[void 0!==s.edit&&s.edit?[o(N.Z,{staticClass:"align-center",attrs:{solo:"",dense:"",rules:[t.rules.required],"hide-details":!0},model:{value:s.form.roomNo,callback:function(o){t.$set(s.form,"roomNo",o)},expression:"item.form.roomNo"}})]:[t._v(" "+t._s(s.roomNo)+" ")]]}},{key:"item.totalRow",fn:function({item:s}){return[void 0!==s.edit&&s.edit?[o(N.Z,{staticClass:"align-center",attrs:{solo:"",dense:"",type:"number",rules:[t.rules.required,t.rules.digits],"hide-details":!0},model:{value:s.form.totalRow,callback:function(o){t.$set(s.form,"totalRow",o)},expression:"item.form.totalRow"}})]:[t._v(" "+t._s(s.totalRow)+" ")]]}},{key:"item.totalCol",fn:function({item:s}){return[void 0!==s.edit&&s.edit?[o(N.Z,{staticClass:"align-center",attrs:{solo:"",dense:"",type:"number",rules:[t.rules.required,t.rules.digits],"hide-details":!0},model:{value:s.form.totalCol,callback:function(o){t.$set(s.form,"totalCol",o)},expression:"item.form.totalCol"}})]:[t._v(" "+t._s(s.totalCol)+" ")]]}},{key:"item.aisle",fn:function({item:s}){return[void 0!==s.edit&&s.edit?[o(N.Z,{staticClass:"align-center",attrs:{solo:"",dense:"","hide-details":!0},model:{value:s.form.aisle,callback:function(o){t.$set(s.form,"aisle",o)},expression:"item.form.aisle"}})]:[t._v(" "+t._s(s.aisle)+" ")]]}},{key:"item.finalSeat",fn:function({item:s}){return[void 0!==s.edit&&s.edit?[o(N.Z,{staticClass:"align-center",attrs:{solo:"",dense:"","hide-details":!0},model:{value:s.form.finalSeat,callback:function(o){t.$set(s.form,"finalSeat",o)},expression:"item.form.finalSeat"}})]:[t._v(" "+t._s(s.finalSeat)+" ")]]}},{key:"item.actions",fn:function({item:s}){return[t.edit?s.edit?[o(k.Z,{staticClass:"mr-1",attrs:{icon:"",small:"",color:"green"},on:{click:function(o){return t.confirmAddRoom(s)}}},[o(P.Z,[t._v("mdi-check")])],1),o(k.Z,{staticClass:"mr-1",attrs:{icon:"",small:"",color:"red"},on:{click:t.reset}},[o(P.Z,[t._v("mdi-close")])],1)]:t._e():[o(k.Z,{attrs:{icon:"",small:"",color:"primary"},on:{click:function(o){return t.showDiagram(s)}}},[o(P.Z,[t._v("mdi-eye")])],1)]]}}],null,!1,3094511080)}):t._e()],1)],1)],1)],1)],1),o(O.Z,{model:{value:t.isShowDiagram,callback:function(o){t.isShowDiagram=o},expression:"isShowDiagram"}},[o(_.Z,[o(l.Z,{attrs:{fluid:""}},[o(j.Z,{staticClass:"ma-4",attrs:{justify:"center",align:"center"}},[o("div",t._l(t.matrix,(function(s,a){return o("ul",t._l(s,(function(s,a){return o("li",{key:a,class:t.bindClass(s)},[t._v(" "+t._s(s.state)+" ")])})),0)})),0)])],1)],1)],1)],2)},A=[],F=(s(7658),s(196));const q={"Access-Control-Allow-Headers":"*","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS","Access-Control-Max-Age":"86400"};F.ZP.defaults.timeout=3e4,F.ZP.defaults.baseURL="http://localhost:5000";const U=F.ZP.create();U.interceptors.request.use((t=>(t.headers=q,t.headers["Content-Type"]="multipart/form-data",t)),(t=>{window.location="http://localhost:5000/error/"+t.response.status}));const E=F.ZP.create();E.interceptors.request.use((t=>(t.data=JSON.stringify(t.data),t.headers=q,t.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",t)),(t=>{window.location="http://localhost:5000/error/"+t.response.status}));const L=F.ZP.create();function M(t,o={}){return new Promise(((s,a)=>{L.get(t,{params:o}).then((t=>{s(t.response)})).catch((t=>{a(t)}))}))}function B(t,o={},s={}){let a;return a="json"===s.formType?L:"form"===s.formType?E:"formData"===s.formType?U:L,new Promise(((r,l)=>{a.post(t,o,s).then((t=>{r("formData"===s.formType?t.data:t)}),(t=>{l(t)}))}))}L.interceptors.request.use((t=>(t.data=JSON.stringify(t.data),t.headers=q,t.headers["Content-Type"]="application/json; charset=UTF-8",t)),(t=>Promise.reject(t))),L.interceptors.response.use((t=>{if(200===t.status)return t.data}),(t=>{window.location="http://localhost:5000/error/"+t.response.status}));var H={name:"home",components:{homeHeader:v},props:[],data(){return{dialog:!1,classRoom:[{roomNo:"I1-017",totalRow:"9",totalCol:"18",finalSeat:"84",diagram:[{row:0,col:0,status:1},{row:0,col:1,status:1},{row:0,col:2,status:1},{row:0,col:3,status:-1},{row:0,col:4,status:1},{row:0,col:5,status:1},{row:0,col:6,status:1},{row:0,col:7,status:1},{row:0,col:8,status:1},{row:0,col:9,status:1},{row:0,col:10,status:1},{row:0,col:11,status:1},{row:0,col:12,status:1},{row:0,col:13,status:1},{row:0,col:14,status:-1},{row:0,col:15,status:1},{row:0,col:16,status:1},{row:0,col:17,status:1},{row:1,col:0,status:1},{row:1,col:1,status:1},{row:1,col:2,status:1},{row:1,col:3,status:-1},{row:1,col:4,status:1},{row:1,col:5,status:1},{row:1,col:6,status:1},{row:1,col:7,status:1},{row:1,col:8,status:0},{row:1,col:9,status:1},{row:1,col:10,status:0},{row:1,col:11,status:1},{row:1,col:12,status:0},{row:1,col:13,status:1},{row:1,col:14,status:-1},{row:1,col:15,status:1},{row:1,col:16,status:0},{row:1,col:17,status:1},{row:2,col:0,status:1},{row:2,col:1,status:0},{row:2,col:2,status:1},{row:2,col:3,status:-1},{row:2,col:4,status:1},{row:2,col:5,status:0},{row:2,col:6,status:1},{row:2,col:7,status:0},{row:2,col:8,status:1},{row:2,col:9,status:0},{row:2,col:10,status:1},{row:2,col:11,status:0},{row:2,col:12,status:1},{row:2,col:13,status:0},{row:2,col:14,status:-1},{row:2,col:15,status:0},{row:2,col:16,status:1},{row:2,col:17,status:0},{row:3,col:0,status:0},{row:3,col:1,status:1},{row:3,col:2,status:0},{row:3,col:3,status:-1},{row:3,col:4,status:0},{row:3,col:5,status:1},{row:3,col:6,status:0},{row:3,col:7,status:1},{row:3,col:8,status:0},{row:3,col:9,status:1},{row:3,col:10,status:0},{row:3,col:11,status:1},{row:3,col:12,status:0},{row:3,col:13,status:1},{row:3,col:14,status:-1},{row:3,col:15,status:1},{row:3,col:16,status:0},{row:3,col:17,status:1},{row:4,col:0,status:1},{row:4,col:1,status:0},{row:4,col:2,status:1},{row:4,col:3,status:-1},{row:4,col:4,status:1},{row:4,col:5,status:0},{row:4,col:6,status:1},{row:4,col:7,status:0},{row:4,col:8,status:1},{row:4,col:9,status:0},{row:4,col:10,status:1},{row:4,col:11,status:0},{row:4,col:12,status:1},{row:4,col:13,status:0},{row:4,col:14,status:-1},{row:4,col:15,status:0},{row:4,col:16,status:1},{row:4,col:17,status:0},{row:5,col:0,status:0},{row:5,col:1,status:1},{row:5,col:2,status:0},{row:5,col:3,status:-1},{row:5,col:4,status:0},{row:5,col:5,status:1},{row:5,col:6,status:0},{row:5,col:7,status:1},{row:5,col:8,status:0},{row:5,col:9,status:1},{row:5,col:10,status:0},{row:5,col:11,status:1},{row:5,col:12,status:0},{row:5,col:13,status:1},{row:5,col:14,status:-1},{row:5,col:15,status:1},{row:5,col:16,status:0},{row:5,col:17,status:1},{row:6,col:0,status:1},{row:6,col:1,status:0},{row:6,col:2,status:1},{row:6,col:3,status:-1},{row:6,col:4,status:1},{row:6,col:5,status:0},{row:6,col:6,status:1},{row:6,col:7,status:0},{row:6,col:8,status:1},{row:6,col:9,status:0},{row:6,col:10,status:1},{row:6,col:11,status:0},{row:6,col:12,status:1},{row:6,col:13,status:0},{row:6,col:14,status:-1},{row:6,col:15,status:0},{row:6,col:16,status:1},{row:6,col:17,status:0},{row:7,col:0,status:0},{row:7,col:1,status:1},{row:7,col:2,status:0},{row:7,col:3,status:-1},{row:7,col:4,status:0},{row:7,col:5,status:1},{row:7,col:6,status:0},{row:7,col:7,status:1},{row:7,col:8,status:0},{row:7,col:9,status:1},{row:7,col:10,status:0},{row:7,col:11,status:1},{row:7,col:12,status:0},{row:7,col:13,status:1},{row:7,col:14,status:-1},{row:7,col:15,status:1},{row:7,col:16,status:0},{row:7,col:17,status:1},{row:8,col:0,status:1},{row:8,col:1,status:0},{row:8,col:2,status:1},{row:8,col:3,status:-1},{row:8,col:4,status:1},{row:8,col:5,status:0},{row:8,col:6,status:1},{row:8,col:7,status:0},{row:8,col:8,status:1},{row:8,col:9,status:0},{row:8,col:10,status:1},{row:8,col:11,status:0},{row:8,col:12,status:1},{row:8,col:13,status:0},{row:8,col:14,status:-1},{row:8,col:15,status:0},{row:8,col:16,status:1},{row:8,col:17,status:0}],aisle:"4,15",edit:!1},{roomNo:"I1-105",totalRow:"8",totalCol:"12",finalSeat:"45",diagram:[{row:0,col:0,status:1},{row:0,col:1,status:1},{row:0,col:2,status:1},{row:0,col:3,status:-1},{row:0,col:4,status:1},{row:0,col:5,status:1},{row:0,col:6,status:1},{row:0,col:7,status:1},{row:0,col:8,status:-1},{row:0,col:9,status:1},{row:0,col:10,status:1},{row:0,col:11,status:1},{row:1,col:0,status:0},{row:1,col:1,status:1},{row:1,col:2,status:0},{row:1,col:3,status:-1},{row:1,col:4,status:0},{row:1,col:5,status:1},{row:1,col:6,status:0},{row:1,col:7,status:1},{row:1,col:8,status:-1},{row:1,col:9,status:1},{row:1,col:10,status:0},{row:1,col:11,status:1},{row:2,col:0,status:1},{row:2,col:1,status:0},{row:2,col:2,status:1},{row:2,col:3,status:-1},{row:2,col:4,status:1},{row:2,col:5,status:0},{row:2,col:6,status:1},{row:2,col:7,status:0},{row:2,col:8,status:-1},{row:2,col:9,status:0},{row:2,col:10,status:1},{row:2,col:11,status:0},{row:3,col:0,status:0},{row:3,col:1,status:1},{row:3,col:2,status:0},{row:3,col:3,status:-1},{row:3,col:4,status:0},{row:3,col:5,status:1},{row:3,col:6,status:0},{row:3,col:7,status:1},{row:3,col:8,status:-1},{row:3,col:9,status:1},{row:3,col:10,status:0},{row:3,col:11,status:1},{row:4,col:0,status:1},{row:4,col:1,status:0},{row:4,col:2,status:1},{row:4,col:3,status:-1},{row:4,col:4,status:1},{row:4,col:5,status:0},{row:4,col:6,status:1},{row:4,col:7,status:0},{row:4,col:8,status:-1},{row:4,col:9,status:0},{row:4,col:10,status:1},{row:4,col:11,status:0},{row:5,col:0,status:0},{row:5,col:1,status:1},{row:5,col:2,status:0},{row:5,col:3,status:-1},{row:5,col:4,status:0},{row:5,col:5,status:1},{row:5,col:6,status:0},{row:5,col:7,status:1},{row:5,col:8,status:-1},{row:5,col:9,status:1},{row:5,col:10,status:0},{row:5,col:11,status:1},{row:6,col:0,status:1},{row:6,col:1,status:0},{row:6,col:2,status:1},{row:6,col:3,status:-1},{row:6,col:4,status:1},{row:6,col:5,status:0},{row:6,col:6,status:1},{row:6,col:7,status:0},{row:6,col:8,status:-1},{row:6,col:9,status:0},{row:6,col:10,status:1},{row:6,col:11,status:0},{row:7,col:0,status:0},{row:7,col:1,status:1},{row:7,col:2,status:0},{row:7,col:3,status:-1},{row:7,col:4,status:0},{row:7,col:5,status:1},{row:7,col:6,status:0},{row:7,col:7,status:1},{row:7,col:8,status:-1},{row:7,col:9,status:1},{row:7,col:10,status:0},{row:7,col:11,status:1}],aisle:"4,9",edit:!1}],defaultRoomNo:0,removeSeat:0,totalRow:0,totalCol:0,edit:!1,headers:[{text:"教室",align:"start",value:"roomNo",sortable:!1},{text:"橫排數",align:"start",value:"totalRow",sortable:!1},{text:"直列數",align:"start",value:"totalCol",sortable:!1},{text:"走道",align:"start",value:"aisle",sortable:!1},{text:"預期座位數",align:"start",value:"finalSeat",sortable:!1},{text:"",align:"start",value:"actions",sortable:!1}],rules:{required:t=>!!t||"必填",digits:t=>/^\+?[1-9][0-9]*$/.test(t)||"請輸入大於零的整數"},matrix:[],isShowDiagram:!1,diagramRow:0,diagramCol:0,diagramDialog:!1,defaultButtonText:"上傳學生清單",selectedFile:null,isSelecting:!1,formData:void 0,isSubmit:!1}},computed:{buttonText(){return this.selectedFile?this.selectedFile.name:this.defaultButtonText}},async mounted(){await M("/test")},methods:{addClassRoom(){const t={room:{key:this.defaultRoomNo},form:{roomNo:void 0,totalRow:void 0,totalCol:void 0,finalSeat:void 0,diagram:void 0}};this.classRoom=[...this.classRoom,t],this.editClassRoom(t)},editClassRoom(t){this.$set(t,"edit",!0),this.edit=!0},confirmAddRoom(t){this.classRoom.pop(),this.$set(t.form,"edit",!1),this.totalRow=t.form.totalRow,this.totalCol=t.form.totalCol,this.finalSeat=t.form.finalSeat,this.aisle=t.form.aisle.split(",").map(Number),this.$set(t.form,"finalSeat",this.finalSeat),this.diagram=this.caculate(this.totalRow,this.totalCol,this.finalSeat,this.aisle),this.$set(t.form,"diagram",this.diagram),this.classRoom.push(t.form),this.edit=!1,console.log(this.classRoom)},reset(){this.classRoom.pop(),this.edit=!1},caculate(t,o,s,a){let r=[],l={},e=0,c=0;for(var u=0;u<t;u++)for(var i=0;i<o;i++)0==c&&(u%2==0?(i%2==0?a.includes(i+1)?l={row:u,col:i,status:-1}:(l={row:u,col:i,status:1},e+=1):l=a.includes(i+1)?{row:u,col:i,status:-1}:{row:u,col:i,status:0},r.push(l)):(i%2==0?l=a.includes(i+1)?{row:u,col:i,status:-1}:{row:u,col:i,status:0}:a.includes(i+1)?l={row:u,col:i,status:-1}:(l={row:u,col:i,status:1},e+=1),r.push(l)));if(e<s)for(var n=0;n<r.length;n++)if(!a.includes(r[n].col+1)&&0==r[n].status&&(r[n].status=1,e+=1,e>=s))break;return r},showDiagram(t){this.diagramDialog=!0,this.matrix=t.diagram,this.diagramRow=t.totalRow,this.diagramCol=t.totalCol;let o=[],s=Math.ceil(t.diagram.length/this.diagramRow);for(let a=0;a<this.diagramRow;a++)o.push(t.diagram.slice(a*s,a*s+s));this.matrix=o,this.isShowDiagram=!this.isShowDiagram},bindClass(t){return 0==t.status?"seatNoUse":1==t.status?"seatActive":"seatAisle"},onButtonClick(){this.isSelecting=!0,window.addEventListener("focus",(()=>{this.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},onFileChanged(t){this.selectedFile=t.target.files[0]},async submit(){if(0==this.classRoom.length)return void alert("請設定座位表！");if(null===this.selectedFile)return void alert("請上傳學生清單！");const t=this.classRoom.map((({edit:t,aisle:o,...s})=>s));this.formData=new FormData,this.formData.append("file",this.selectedFile),this.formData.append("classRooms",JSON.stringify(t));let o={formType:"formData",responseType:"blob"};B("/submit",this.formData,o).then((t=>{let o=URL.createObjectURL(t);location.href=o,URL.revokeObjectURL(o),this.isSubmit=!0}))}}},I=H,J=(0,p.Z)(I,$,A,!1,null,null,null),W=J.exports;a.ZP.use(R.ZP);var G=new R.ZP({routes:[{path:"/",redirect:"/home"},{name:"首頁",path:"/home",component:W}]}),V=s(1705);a.ZP.use(V.Z);var z=new V.Z({});a.ZP.config.productionTip=!1,new a.ZP({router:G,vuetify:z,render:t=>t(C)}).$mount("#app")},8296:function(t,o,s){t.exports=s.p+"img/success.77668001.png"}},o={};function s(a){var r=o[a];if(void 0!==r)return r.exports;var l=o[a]={exports:{}};return t[a](l,l.exports,s),l.exports}s.m=t,function(){var t=[];s.O=function(o,a,r,l){if(!a){var e=1/0;for(n=0;n<t.length;n++){a=t[n][0],r=t[n][1],l=t[n][2];for(var c=!0,u=0;u<a.length;u++)(!1&l||e>=l)&&Object.keys(s.O).every((function(t){return s.O[t](a[u])}))?a.splice(u--,1):(c=!1,l<e&&(e=l));if(c){t.splice(n--,1);var i=r();void 0!==i&&(o=i)}}return o}l=l||0;for(var n=t.length;n>0&&t[n-1][2]>l;n--)t[n]=t[n-1];t[n]=[a,r,l]}}(),function(){s.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(o,{a:o}),o}}(),function(){s.d=function(t,o){for(var a in o)s.o(o,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/seat-project-web/"}(),function(){var t={143:0};s.O.j=function(o){return 0===t[o]};var o=function(o,a){var r,l,e=a[0],c=a[1],u=a[2],i=0;if(e.some((function(o){return 0!==t[o]}))){for(r in c)s.o(c,r)&&(s.m[r]=c[r]);if(u)var n=u(s)}for(o&&o(a);i<e.length;i++)l=e[i],s.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return s.O(n)},a=self["webpackChunkseat_project"]=self["webpackChunkseat_project"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(6833)}));a=s.O(a)})();
//# sourceMappingURL=app.cd860246.js.map